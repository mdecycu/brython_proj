<!-- templates/register.html -->
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>註冊帳號</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js"></script>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body onload="brython()">
    <h2>註冊新帳號</h2>

    <form id="register_form" method="POST">
        <label for="account">學號（8 位數字）:</label>
        <input type="text" id="account" name="account" maxlength="8" required>
        <br><br>

        <label for="password">密碼:</label>
        <input type="password" id="password" name="password" required>
        <br><br>

        <label for="confirm_password">確認密碼:</label>
        <input type="password" id="confirm_password" name="confirm_password" required>
        <br><br>

        <button type="submit">註冊</button>
    </form>

    <div id="error_message" style="color: red; display: none;"></div>

    <script type="text/python">
        from browser import document, window

        def validate_form(event):
            # 取得帳號與密碼
            account = document["account"].value
            password = document["password"].value
            confirm_password = document["confirm_password"].value
            error_message = document["error_message"]

            # 檢查學號是否為 8 位數字
            if len(account) != 8 or not account.isdigit():
                error_message.text = "學號必須是 8 位數字"
                error_message.style.display = "block"
                event.preventDefault()
                return

            # 檢查兩次密碼是否一致
            if password != confirm_password:
                error_message.text = "兩次密碼輸入不一致"
                error_message.style.display = "block"
                event.preventDefault()
                return

            # 若沒有錯誤，隱藏錯誤訊息
            error_message.style.display = "none"

        # 綁定表單提交事件
        document["register_form"].bind("submit", validate_form)
    </script>
</body>
</html>
